!function(e,t){return"function"==typeof define&&define.amd?void define("ngStorage",["angular"],function(e){return t(e)}):t(e)}("undefined"==typeof angular?null:angular,function(e){function t(t){return["$rootScope","$window","$log","$timeout",function(n,r,i,o){function a(e){var t=r[e];if(t&&"localStorage"===e){var n="__"+Math.round(1e7*Math.random());try{localStorage.setItem(n,n),localStorage.removeItem(n)}catch(i){t=!1}}return t}var c,s,l=a(t)||(i.warn("This browser does not support Web Storage!"),{setItem:function(){},getItem:function(){}}),u={$default:function(t){for(var n in t)e.isDefined(u[n])||(u[n]=t[n]);return u},$reset:function(e){for(var t in u)"$"===t[0]||delete u[t]&&l.removeItem("ngStorage-"+t);return u.$default(e)}};try{l=r[t],l.length}catch(d){i.warn("This browser does not support Web Storage!"),l={}}for(var f,p=0,h=l.length;h>p;p++)(f=l.key(p))&&"ngStorage-"===f.slice(0,10)&&(u[f.slice(10)]=e.fromJson(l.getItem(f)));return c=e.copy(u),n.$watch(function(){var t;s||(s=o(function(){if(s=null,!e.equals(u,c)){t=e.copy(c),e.forEach(u,function(n,r){e.isDefined(n)&&"$"!==r[0]&&l.setItem("ngStorage-"+r,e.toJson(n)),delete t[r]});for(var n in t)l.removeItem("ngStorage-"+n);c=e.copy(u)}},100,!1))}),"localStorage"===t&&r.addEventListener&&r.addEventListener("storage",function(t){"ngStorage-"===t.key.slice(0,10)&&(t.newValue?u[t.key.slice(10)]=e.fromJson(t.newValue):delete u[t.key.slice(10)],c=e.copy(u),n.$apply())}),u}]}e.module("ngStorage",[]).factory("$localStorage",t("localStorage")).factory("$sessionStorage",t("sessionStorage"))}),define("lib/autocomplete",["angular"],function(e){var t=e.module("autocomplete",[]);t.directive("autocomplete",function(){var t=-1;return{restrict:"E",scope:{searchParam:"=ngModel",suggestions:"=data",onType:"=onType",onSelect:"=onSelect"},controller:["$scope",function(e){e.selectedIndex=-1,e.setIndex=function(t){e.selectedIndex=parseInt(t)},this.setIndex=function(t){e.setIndex(t),e.$apply()},e.getIndex=function(t){return e.selectedIndex};var t=!0;e.completing=!1,e.$watch("searchParam",function(n,r){r!==n&&(t&&e.searchParam&&(e.completing=!0,e.searchFilter=e.searchParam,e.selectedIndex=-1),e.onType&&e.onType(e.searchParam))}),this.preSelect=function(n){t=!1,e.$apply(),t=!0},e.preSelect=this.preSelect,this.preSelectOff=function(){t=!0},e.preSelectOff=this.preSelectOff,e.select=function(n){n&&(e.searchParam=n,e.searchFilter=n,e.onSelect&&e.onSelect(n)),t=!1,e.completing=!1,setTimeout(function(){t=!0},1e3),e.setIndex(-1)}}],link:function(n,r,i){var o="";n.attrs={placeholder:"start typing...","class":"",id:"",inputclass:"",inputid:""};for(var a in i)o=a.replace("attr","").toLowerCase(),0===a.indexOf("attr")&&(n.attrs[o]=i[a]);i.clickActivation&&(r[0].onclick=function(e){n.searchParam||(n.completing=!0,n.$apply())});var c={left:37,up:38,right:39,down:40,enter:13,esc:27};document.addEventListener("keydown",function(e){var t=e.keyCode||e.which;switch(t){case c.esc:n.select(),n.setIndex(-1),n.$apply(),e.preventDefault()}},!0),document.addEventListener("blur",function(e){setTimeout(function(){n.select(),n.setIndex(-1),n.$apply()},200)},!0),r[0].addEventListener("keydown",function(r){var i=r.keyCode||r.which,o=e.element(this).find("li").length;switch(i){case c.up:if(t=n.getIndex()-1,-1>t)t=o-1;else if(t>=o){t=-1,n.setIndex(t),n.preSelectOff();break}n.setIndex(t),-1!==t&&n.preSelect(e.element(e.element(this).find("li")[t]).text()),n.$apply();break;case c.down:if(t=n.getIndex()+1,-1>t)t=o-1;else if(t>=o){t=-1,n.setIndex(t),n.preSelectOff(),n.$apply();break}n.setIndex(t),-1!==t&&n.preSelect(e.element(e.element(this).find("li")[t]).text());break;case c.left:break;case c.right:case c.enter:t=n.getIndex(),-1!==t&&n.select(e.element(e.element(this).find("li")[t]).text()),n.setIndex(-1),n.$apply();break;case c.esc:n.select(),n.setIndex(-1),n.$apply(),r.preventDefault();break;default:return}(-1!==n.getIndex()||i==c.enter)&&r.preventDefault()})},templateUrl:"js/lib/ac_template.html"}}),t.filter("highlight",["$sce",function(e){return function(t,n){if("function"==typeof t)return"";if(n){var r="("+n.split(/\ /).join(" |")+"|"+n.split(/\ /).join("|")+")",i=new RegExp(r,"gi");r.length&&(t=t.replace(i,'<span class="highlight">$1</span>'))}return e.trustAsHtml(t)}}]),t.directive("suggestion",function(){return{restrict:"A",require:"^autocomplete",link:function(e,t,n,r){t.bind("mouseenter",function(){r.preSelect(n.val),r.setIndex(n.index)}),t.bind("mouseleave",function(){r.preSelectOff()})}}})}),function(e,t){return"function"==typeof define&&define.amd?void define("ngQuickDate",["angular"],function(e){return t(e)}):t(e)}("undefined"==typeof angular?null:angular,function(e){var t;t=e.module("ngQuickDate",[]),t.provider("ngQuickDateDefaults",function(){return{options:{dateFormat:"M/d/yyyy",timeFormat:"h:mm a",labelFormat:null,placeholder:"Click to Set Date",hoverText:null,buttonIconHtml:null,closeButtonHtml:"&times;",nextLinkHtml:"Next &rarr;",prevLinkHtml:"&larr; Prev",disableTimepicker:!1,disableClearButton:!1,defaultTime:null,dayAbbreviations:["Su","M","Tu","W","Th","F","Sa"],dateFilter:null,parseDateFunction:function(e){var t;return t=Date.parse(e),isNaN(t)?null:new Date(t)}},$get:function(){return this.options},set:function(e,t){var n,r,i;if("object"==typeof e){i=[];for(n in e)r=e[n],i.push(this.options[n]=r);return i}return this.options[e]=t}}}),t.directive("quickDatepicker",["ngQuickDateDefaults","$filter","$sce",function(t,n,r){return{restrict:"E",require:"?ngModel",scope:{dateFilter:"=?",onChange:"&",required:"@"},replace:!0,link:function(i,o,a,c){var s,l,u,d,f,p,h,g,v,m,y,S,D,$;return h=function(){var e;return y(),i.toggleCalendar(!1),i.weeks=[],i.inputDate=null,i.inputTime=null,i.invalid=!0,"string"==typeof a.initValue&&c.$setViewValue(a.initValue),i.defaultTime||(e=new Date(2013,0,1,12,0),i.datePlaceholder=n("date")(e,i.dateFormat),i.timePlaceholder=n("date")(e,i.timeFormat)),m(),v()},y=function(){var e,n;for(e in t)n=t[e],e.match(/[Hh]tml/)?i[e]=r.trustAsHtml(t[e]||""):!i[e]&&a[e]?i[e]=a[e]:i[e]||(i[e]=t[e]);return i.labelFormat||(i.labelFormat=i.dateFormat,i.disableTimepicker||(i.labelFormat+=" "+i.timeFormat)),a.iconClass&&a.iconClass.length?i.buttonIconHtml=r.trustAsHtml("<i ng-show='iconClass' class='"+a.iconClass+"'></i>"):void 0},l=!1,window.document.addEventListener("click",function(e){return i.calendarShown&&!l&&(i.toggleCalendar(!1),i.$apply()),l=!1}),e.element(o[0])[0].addEventListener("click",function(e){return l=!0}),v=function(){var e;return e=c.$modelValue?g(c.$modelValue):null,D(),S(e),i.mainButtonStr=e?n("date")(e,i.labelFormat):i.placeholder,i.invalid=c.$invalid},S=function(e){return null!=e?(i.inputDate=n("date")(e,i.dateFormat),i.inputTime=n("date")(e,i.timeFormat)):(i.inputDate=null,i.inputTime=null)},m=function(e){var t;return null==e&&(e=null),t=null!=e?new Date(e):new Date,"Invalid Date"===t.toString()&&(t=new Date),t.setDate(1),i.calendarDate=new Date(t)},D=function(){var e,t,n,r,o,a,s,l,d,f,h,g,v,m;for(a=i.calendarDate.getDay(),r=p(i.calendarDate.getFullYear(),i.calendarDate.getMonth()),o=Math.ceil((a+r)/7),h=[],e=new Date(i.calendarDate),e.setDate(e.getDate()+-1*a),s=g=0,m=o-1;m>=0?m>=g:g>=m;s=m>=0?++g:--g)for(h.push([]),n=v=0;6>=v;n=++v)t=new Date(e),i.defaultTime&&(d=i.defaultTime.split(":"),t.setHours(d[0]||0),t.setMinutes(d[1]||0),t.setSeconds(d[2]||0)),l=c.$modelValue&&t&&u(t,c.$modelValue),f=u(t,new Date),h[s].push({date:t,selected:l,disabled:"function"==typeof i.dateFilter?!i.dateFilter(t):!1,other:t.getMonth()!==i.calendarDate.getMonth(),today:f}),e.setDate(e.getDate()+1);return i.weeks=h},c.$parsers.push(function(t){return i.required&&null==t?(c.$setValidity("required",!1),null):e.isDate(t)?(c.$setValidity("required",!0),t):e.isString(t)?(c.$setValidity("required",!0),i.parseDateFunction(t)):null}),c.$formatters.push(function(t){return e.isDate(t)?t:e.isString(t)?i.parseDateFunction(t):void 0}),s=function(e,t){return n("date")(e,t)},$=function(e){return"string"==typeof e?g(e):e},g=t.parseDateFunction,u=function(e,t,n){return null==n&&(n=!1),n?e-t===0:(e=$(e),t=$(t),e&&t&&e.getYear()===t.getYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate())},d=function(e,t){return e&&t?parseInt(e.getTime()/6e4)===parseInt(t.getTime()/6e4):!1},p=function(e,t){return[31,e%4===0&&e%100!==0||e%400===0?29:28,31,30,31,30,31,31,30,31,30,31][t]},f=function(e,t){var n,r,i,o,a,c;return a=n=r=c=o=null,i=function(){var e;return e=+new Date-c,a=t>e&&e>0?setTimeout(i,t-e):null},function(){return r=this,n=arguments,c=+new Date,a||(a=setTimeout(i,t),o=e.apply(r,n),r=n=null),o}},c.$render=function(){return m(c.$viewValue),v()},c.$viewChangeListeners.unshift(function(){return m(c.$viewValue),v(),i.onChange?i.onChange():void 0}),i.$watch("calendarShown",function(t,n){var r;return t?(r=e.element(o[0].querySelector(".quickdate-date-input"))[0],r.select()):void 0}),i.toggleCalendar=f(function(e){return i.calendarShown=isFinite(e)?e:!i.calendarShown},150),i.selectDate=function(e,t){var n;return null==t&&(t=!0),n=!c.$viewValue&&e||c.$viewValue&&!e||e&&c.$viewValue&&e.getTime()!==c.$viewValue.getTime(),"function"!=typeof i.dateFilter||i.dateFilter(e)?(c.$setViewValue(e),t&&i.toggleCalendar(!1),!0):!1},i.selectDateFromInput=function(e){var t,n,r,o;null==e&&(e=!1);try{if(n=g(i.inputDate),!n)throw"Invalid Date";if(!i.disableTimepicker&&i.inputTime&&i.inputTime.length&&n){if(o=i.disableTimepicker?"00:00:00":i.inputTime,r=g(""+i.inputDate+" "+o),!r)throw"Invalid Time";n=r}if(!d(c.$viewValue,n)&&!i.selectDate(n,!1))throw"Invalid Date";return e&&i.toggleCalendar(!1),i.inputDateErr=!1,i.inputTimeErr=!1}catch(a){if(t=a,"Invalid Date"===t)return i.inputDateErr=!0;if("Invalid Time"===t)return i.inputTimeErr=!0}},i.onDateInputTab=function(){return i.disableTimepicker&&i.toggleCalendar(!1),!0},i.onTimeInputTab=function(){return i.toggleCalendar(!1),!0},i.nextMonth=function(){return m(new Date(new Date(i.calendarDate).setMonth(i.calendarDate.getMonth()+1))),v()},i.prevMonth=function(){return m(new Date(new Date(i.calendarDate).setMonth(i.calendarDate.getMonth()-1))),v()},i.clear=function(){return i.selectDate(null,!0)},h()},template:"<div class='quickdate'>\n  <a href='' ng-focus='toggleCalendar()' ng-click='toggleCalendar()' class='quickdate-button' title='{{hoverText}}'><div ng-hide='iconClass' ng-bind-html='buttonIconHtml'></div>{{mainButtonStr}}</a>\n  <div class='quickdate-popup' ng-class='{open: calendarShown}'>\n    <a href='' tabindex='-1' class='quickdate-close' ng-click='toggleCalendar()'><div ng-bind-html='closeButtonHtml'></div></a>\n    <div class='quickdate-text-inputs'>\n      <div class='quickdate-input-wrapper'>\n        <label>Date</label>\n        <input class='quickdate-date-input' ng-class=\"{'ng-invalid': inputDateErr}\" name='inputDate' type='text' ng-model='inputDate' placeholder='{{ datePlaceholder }}' ng-enter=\"selectDateFromInput(true)\" ng-blur=\"selectDateFromInput(false)\" on-tab='onDateInputTab()' />\n      </div>\n      <div class='quickdate-input-wrapper' ng-hide='disableTimepicker'>\n        <label>Time</label>\n        <input class='quickdate-time-input' ng-class=\"{'ng-invalid': inputTimeErr}\" name='inputTime' type='text' ng-model='inputTime' placeholder='{{ timePlaceholder }}' ng-enter=\"selectDateFromInput(true)\" ng-blur=\"selectDateFromInput(false)\" on-tab='onTimeInputTab()'>\n      </div>\n    </div>\n    <div class='quickdate-calendar-header'>\n      <a href='' class='quickdate-prev-month quickdate-action-link' tabindex='-1' ng-click='prevMonth()'><div ng-bind-html='prevLinkHtml'></div></a>\n      <span class='quickdate-month'>{{calendarDate | date:'MMMM yyyy'}}</span>\n      <a href='' class='quickdate-next-month quickdate-action-link' ng-click='nextMonth()' tabindex='-1' ><div ng-bind-html='nextLinkHtml'></div></a>\n    </div>\n    <table class='quickdate-calendar'>\n      <thead>\n        <tr>\n          <th ng-repeat='day in dayAbbreviations'>{{day}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat='week in weeks'>\n          <td ng-mousedown='selectDate(day.date, true, true)' ng-click='$event.preventDefault()' ng-class='{\"other-month\": day.other, \"disabled-date\": day.disabled, \"selected\": day.selected, \"is-today\": day.today}' ng-repeat='day in week'>{{day.date | date:'d'}}</td>\n        </tr>\n      </tbody>\n    </table>\n    <div class='quickdate-popup-footer'>\n      <a href='' class='quickdate-clear' tabindex='-1' ng-hide='disableClearButton' ng-click='clear()'>Clear</a>\n    </div>\n  </div>\n</div>"}}]),t.directive("ngEnter",function(){return function(e,t,n){return t.bind("keydown keypress",function(t){return 13===t.which?(e.$apply(n.ngEnter),t.preventDefault()):void 0})}}),t.directive("onTab",function(){return{restrict:"A",link:function(e,t,n){return t.bind("keydown keypress",function(t){return 9!==t.which||t.shiftKey?void 0:e.$apply(n.onTab)})}}})}),define("modules/app",["angular","ngStorage","angular-route","lib/autocomplete","ngQuickDate"],function(e){return e.module("app",["ngStorage","ngRoute","autocomplete","ngQuickDate"])}),define("configuration/quickdateConfiguration",["modules/app"],function(e){e.config(["ngQuickDateDefaultsProvider",function(e){e.set({dateFormat:"dd/MM/yyyy",disableTimepicker:!0,disableClearButton:!0,parseDateFunction:function(e){var t=/^(.*?)\/(.*?)\/(.*?)$/,n=e.match(t);return new Date(n[3],n[2]-1,n[1])}})}])}),define("service/contactsService",["modules/app"],function(e){e.service("contactsService",["$http",function(e){this.getContacts=function(t){return e.get("/contacts")}}])}),define("service/projectsService",["modules/app"],function(e){e.service("projectsService",["$http",function(e){this.getProjects=function(t){return e.get("/projects")}}])}),define("service/loadContactsAndProjectsService",["modules/app","service/contactsService","service/projectsService"],function(e){e.service("loadContactsAndProjectsService",["$sessionStorage","$q","$route","$location","contactsService","projectsService",function(e,t,n,r,i,o){this.refreshContactsProjects=function(a){t.all([i.getContacts(),o.getProjects()]).then(function(t){e.$default({contacts:t[0].data}),e.$default({projects:t[1].data}),r.path()===a?n.reload():r.path(a)})}}])}),define("events/locationChangeStart",["modules/app","service/loadContactsAndProjectsService"],function(e){e.run(["$rootScope","$sessionStorage","$location","loadContactsAndProjectsService",function(e,t,n,r){var i=function(e){return e.indexOf("/entries")>0||e.indexOf("/search")>0},o=function(){return!t.contacts||!t.projects},a=function(e,t,a){o()&&i(t)&&(e.preventDefault(),r.refreshContactsProjects(n.path()))};e.$on("$locationChangeStart",a)}])}),define("controllers/menuController",["angular","modules/app","service/loadContactsAndProjectsService"],function(e,t){t.controller("menuController",["$scope","$location","$sessionStorage","loadContactsAndProjectsService",function(t,n,r,i){this.refreshContactsProjects=function(o){o.stopPropagation(),e.element(o.target).parent().parent().parent().removeClass("open"),delete r.contacts,delete r.projects,t.openDropDown=!1,i.refreshContactsProjects(n.path())}}])}),define("controllers/alertsController",["modules/app"],function(e){e.controller("alertsController",["$rootScope",function(e){e.alerts={},this.dismissSuccess=function(){e.alerts.success=null},this.dismissFalure=function(){e.alerts.failure=null}}])}),define("interceptors/loadingInterceptor",["modules/app"],function(e){e.config(["$httpProvider",function(e){e.interceptors.push(["$q","$injector",function(e,t){var n,r=0;n=n||t.get("$rootScope");var i=function(){++r,1===r&&(n.ajaxLoader=!0)},o=function(){--r,0===r&&(n.ajaxLoader=!1)};return{request:function(t){return i(),t||e.when(t)},response:function(t){return o(),t||e.when(t)},responseError:function(t){return o(),e.reject(t)}}}])}])}),define("interceptors/httpErrorInterceptor",["modules/app"],function(e){e.config(["$httpProvider",function(e){e.interceptors.push(["$q","$location","$sessionStorage","$window",function(e,t,n,r){return{responseError:function(i){return 403==i.status?(delete n.contacts,delete n.projects,t.path("/register")):401==i.status&&(r.location="/"),e.reject(i)}}}])}])}),define("service/redirectService",["modules/app","service/contactsService","service/projectsService"],function(e){e.service("redirectService",["$location","$sessionStorage","$q","contactsService","projectsService",function(e,t,n,r,i){this.loadCurrentEntries=function(){var t=new Date,n=t.getMonth()+1,r=t.getFullYear();e.path("/entries/"+n+"/"+r)}}])}),define("routes/defaultRoutes",["modules/app","service/redirectService"],function(e){e.config(["$routeProvider",function(e){e.when("/",{redirectTo:"/entries/current"}).otherwise({redirectTo:"/"})}])}),define("service/registrationService",["modules/app"],function(e){e.service("registrationService",["$http",function(e){this.register=function(t){return e.post("/register",{apiKey:t})}}])}),define("controllers/registrationController",["modules/app","service/registrationService","service/contactsService","service/projectsService"],function(e){e.controller("registrationController",["$scope","$rootScope","$location","$q","$sessionStorage","registrationService","contactsService","projectsService",function(e,t,n,r,i,o,a,c){t.alerts={},e.register=function(){o.register(e.apiKey).then(function(e){n.path("/entries/current")})}}])}),define("routes/registrationRoutes",["modules/app","controllers/registrationController"],function(e){e.config(["$routeProvider",function(e){e.when("/register",{controller:"registrationController",templateUrl:"views/register.html"})}])}),define("models/listEntriesModel",[],function(){var e=function(){this.selectedEntries=[],this.allEntriesSelected=!1,this.entries=[]};return e.prototype.isNoEntrySelected=function(){return 0==this.selectedEntries.length},e.prototype.isEntrySelected=function(e){return this.selectedEntries.indexOf(e)>-1},e.prototype.selectEntry=function(e){this.allEntriesSelected=!1;var t=this.selectedEntries.indexOf(e);t>-1?this.selectedEntries.splice(t,1):this.selectedEntries.push(e)},e.prototype.selectAllEntries=function(){this.selectedEntries=this.allEntriesSelected?this.entries.map(function(e){return e.id}):[]},e}),define("service/entriesService",["modules/app"],function(e){e.service("entriesService",["$http",function(e){var t=function(e){var t=e.getFullYear(),n=e.getMonth();return new Date(t,n+1,0)},n=function(e){var t=e.getMonth()+1;return e.getDate()+"/"+t+"/"+e.getFullYear()};this.getEntries=function(r,i,o){var a=new Date(i,r-1,1),c=n(a),s=n(t(a));return e.get("/entries?from="+c+"&to="+s)},this.addBulkEntries=function(t,r,i,o){var a={contactId:t.id,projectId:r.id,duration:60*i*60,dates:o.map(function(e){return n(e)})};return e.post("/entries/bulk/add",a)},this["delete"]=function(t){return e["delete"]("/entries/"+t)},this.deleteBulkEntries=function(t){return e.post("/entries/bulk/delete",{entryIds:t})}}])}),define("controllers/listEntriesController",["modules/app","models/listEntriesModel","service/entriesService"],function(e,t){e.controller("listEntriesController",["$scope","$routeParams","$sessionStorage","$rootScope","entriesService",function(e,n,r,i,o){var a=new t;e.model=a;var c=function(e){return{id:e.id,date:e.date,contact:e.contact?r.contacts.filter(function(t){return t.id==e.contact})[0].name:"",project:e.project?r.projects.filter(function(t){return t.id==e.project})[0].name:"",duration:e.duration}},s=function(e){return e.map(c)},l=function(e){i.alerts.success=e};this.fetchEntries=function(){o.getEntries(n.month,n.year).then(function(e){a.entries=s(e.data)})},this.init=function(){var t=this;e.$on("child.refresh.entries",function(){t.fetchEntries()}),this.fetchEntries()},this.deleteEntry=function(e){var t=this;o["delete"](e).then(function(){l("Entry deleted successfully!"),t.fetchEntries()})},this.deleteAllSelectedEntries=function(){var e=this;o.deleteBulkEntries(a.selectedEntries).then(function(){a.allEntriesSelected=!1,a.selectedEntries=[],l("Entries deleted successfully!"),e.fetchEntries()})}}])}),define("models/addEntriesModel",[],function(){var e=function(e,t){for(var n=[],r=new Date(t,e-1,1),i=new Date(t,e,0),o=r;i>=o;o=new Date(t,e-1,o.getDate()+1))n.push(o);return n},t=function(e){var t=new Date;return e.filter(function(e){return t>=e&&e.getDay()>=1&&e.getDay()<=5})},n=["Su","Mo","Tu","We","Th","Fr","Sa"],r=function(e){this.value=e};r.prototype.isInFuture=function(){return this.value>new Date},r.prototype.dayName=function(){return n[this.value.getDay()]},r.prototype.isWeekend=function(){var e=this.value.getDay();return 0==e||6==e};var i=new r(null);i.isInFuture=function(){return!0},i.dayName=function(){return""},i.isWeekend=function(){return!1};var o=function(e){for(var t=[],n=e[0],o=n.getDay(),a=e.length,c=1,s=0;6>s&&!(c>a);s++){t.push([]);for(var l=0;6>=l;l++)0==s&&o>l?t[s].push(i):a>=c?(t[s].push(new r(e[c-1])),c++):t[s].push(i)}return t},a=function(n,r,i,a){var c=e(i,a);this._weekdays=t(c),this._contacts=n,this._projects=r,this.projectNames=r.map(function(e){return e.name}),this.dates=o(c),this.allWeekdaysSelected=!1,this.selectedDates=[]};return a.prototype.isDateSelected=function(e){return this.selectedDates.indexOf(e.value)>-1},a.prototype.selectProject=function(e){var t=this;this.selectedProject=this._projects.filter(function(t){return t.name===e})[0],this.selectedContact=this._contacts.filter(function(e){return e.id===t.selectedProject.contactId})[0]},a.prototype.isInvalid=function(){return!this.selectedProject||!this.selectedContact||!this.duration||0===this.selectedDates.length},a.prototype.toggleAllWeekdays=function(){this.selectedDates=this.allWeekdaysSelected?this._weekdays.slice():[]},a.prototype.selectDate=function(e){if(!e.isInFuture()){this.allWeekdaysSelected=!1;var t=this.selectedDates.indexOf(e.value);t>-1?this.selectedDates.splice(t,1):this.selectedDates.push(e.value)}},a}),define("controllers/addEntriesController",["modules/app","models/addEntriesModel","service/entriesService"],function(e,t){e.controller("addEntriesController",["$scope","$location","$anchorScroll","$routeParams","$sessionStorage","$rootScope","entriesService",function(e,n,r,i,o,a,c){var s=new t(o.contacts,o.projects,i.month,i.year);e.model=s,this.selectProject=function(e){s.selectProject(e)},this.projectNameChanged=function(){s.selectedProject&&s.typedProjectName!==s.selectedProject.name&&(s.selectedContact=null,s.selectedProject=null)},this.addEntries=function(){c.addBulkEntries(s.selectedContact,s.selectedProject,s.duration,s.selectedDates).then(function(){s.selectedDates=[],s.allWeekdaysSelected=!1,a.alerts.success="Entries added successfully!",e.$emit("parent.refresh.entries"),n.hash("viewEntries"),r(),n.hash("")})}}])}),define("models/paginationModel",[],function(){var e=function(e){var t=e.getMonth()+1;return t+"/"+e.getFullYear()},t=function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"];return t[e-1]},n=function(t,n){var r=new Date(n,t-2,1);return e(r)},r=function(t,n){var r=new Date(n,t,1);return e(r)},i=function(e,i){this._currentMonth=e,this._currentYear=i,this.previousMonthYear=n(e,i),this.nextMonthYear=r(e,i),this.currentMonthYear=t(e)+" "+i};return i.prototype.showNextMonthYear=function(){return new Date(this._currentYear,this._currentMonth,1)<new Date},i}),define("controllers/paginationController",["modules/app","models/paginationModel"],function(e,t){e.controller("paginationController",["$scope","$routeParams",function(e,n){var r=new t(n.month,n.year);e.model=r,this.goToNextMonth=function(e){r.showNextMonthYear()||e.preventDefault()}}])}),define("controllers/entriesController",["modules/app","controllers/listEntriesController","controllers/addEntriesController","controllers/paginationController","service/entriesService"],function(e){e.controller("entriesController",["$scope","$rootScope",function(e,t){t.alerts={},e.$on("parent.refresh.entries",function(){e.$broadcast("child.refresh.entries")})}])}),define("routes/entriesPageRoutes",["modules/app","service/redirectService","controllers/entriesController"],function(e){e.config(["$routeProvider",function(e){e.when("/entries/current",{resolve:{redirect:["redirectService",function(e){e.loadCurrentEntries()}]}}).when("/entries/:month/:year",{controller:"entriesController",templateUrl:"views/entries.html"})}])}),define("models/searchModel",[],function(){var e=function(e,t){this._contacts=e,this._projects=t,this.projectNames=t.map(function(e){return e.name})};return e.prototype.isInvalid=function(){return!(this.selectedProject&&this.selectedContact&&this.fromDate&&this.toDate)},e.prototype.isQuickSearchInvalid=function(){return!this.selectedProject||!this.selectedContact},e.prototype.selectProject=function(e){var t=this;this.selectedProject=this._projects.filter(function(t){return t.name===e})[0],this.selectedContact=this._contacts.filter(function(e){return e.id===t.selectedProject.contactId})[0]},e}),define("service/searchService",["modules/app"],function(e){e.service("searchService",["$http",function(e){var t=function(e){var t=e.getMonth()+1;return e.getDate()+"/"+t+"/"+e.getFullYear()};this.searchEntries=function(n,r,i){var o=t(r),a=t(i);return e.get("/entries?projects="+n.id+"&from="+o+"&to="+a)}}])}),define("controllers/searchController",["modules/app","models/searchModel","service/searchService",""],function(e,t){e.controller("searchController",["$scope","$rootScope","$sessionStorage","searchService",function(e,n,r,i){n.alerts={};var o=new t(r.contacts,r.projects);e.model=o,this.selectProject=function(e){o.selectProject(e)},this.projectNameChanged=function(){o.selectedProject&&o.typedProjectName!==o.selectedProject.name&&(o.selectedContact=null,o.selectedProject=null)};var a=function(e){return e.map(c)},c=function(e){return{date:e.date,duration:e.duration}};this.search=function(){i.searchEntries(o.selectedProject,o.fromDate,o.toDate).then(function(e){o.searchResults=a(e.data)})},this.quickSearch=function(){var e=new Date;i.searchEntries(o.selectedProject,new Date(e.getFullYear(),0,1),e).then(function(e){o.searchResults=a(e.data)})}}])}),define("routes/searchRoutes",["modules/app","controllers/searchController"],function(e){e.config(["$routeProvider",function(e){e.when("/search",{controller:"searchController",templateUrl:"views/search.html"})}])}),require.config({baseUrl:"js",paths:{jquery:"//code.jquery.com/jquery-2.1.1.min",angular:"//ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular","angular-route":"//ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular-route.min",ngStorage:"./lib/ngStorage",bootstrap:"//netdna.bootstrapcdn.com/bootstrap/3.0.1/js/bootstrap.min",ngQuickDate:"./lib/ngQuickDate"},shim:{angular:{exports:"angular"},"angular-route":{exports:"angular-route",deps:["angular"]},ngStorage:{deps:["angular"]},ngQuickDate:{deps:["angular"]},bootstrap:{exports:"bootstrap",deps:["jquery"]}}}),require(["angular","bootstrap","configuration/quickdateConfiguration","events/locationChangeStart","controllers/menuController","controllers/alertsController","interceptors/loadingInterceptor","interceptors/httpErrorInterceptor","routes/defaultRoutes","routes/registrationRoutes","routes/entriesPageRoutes","routes/searchRoutes"],function(e){e.bootstrap(document,["app"])}),define("main",function(){});
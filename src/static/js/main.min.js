/* --- Made by justgoscha and licensed under MIT license --- */

define("lib/autocomplete",["angular"],function(e){var t=e.module("autocomplete",[]);t.directive("autocomplete",function(){var t=-1;return{restrict:"E",scope:{searchParam:"=ngModel",suggestions:"=data",onType:"=onType",onSelect:"=onSelect"},controller:["$scope",function(e){e.selectedIndex=-1,e.setIndex=function(t){e.selectedIndex=parseInt(t)},this.setIndex=function(t){e.setIndex(t),e.$apply()},e.getIndex=function(t){return e.selectedIndex};var t=!0;e.completing=!1,e.$watch("searchParam",function(n,r){if(r===n)return;t&&e.searchParam&&(e.completing=!0,e.searchFilter=e.searchParam,e.selectedIndex=-1),e.onType&&e.onType(e.searchParam)}),this.preSelect=function(n){t=!1,e.$apply(),t=!0},e.preSelect=this.preSelect,this.preSelectOff=function(){t=!0},e.preSelectOff=this.preSelectOff,e.select=function(n){n&&(e.searchParam=n,e.searchFilter=n,e.onSelect&&e.onSelect(n)),t=!1,e.completing=!1,setTimeout(function(){t=!0},1e3),e.setIndex(-1)}}],link:function(n,r,i){var s="";n.attrs={placeholder:"start typing...","class":"",id:"",inputclass:"",inputid:""};for(var o in i)s=o.replace("attr","").toLowerCase(),o.indexOf("attr")===0&&(n.attrs[s]=i[o]);i.clickActivation&&(r[0].onclick=function(e){n.searchParam||(n.completing=!0,n.$apply())});var u={left:37,up:38,right:39,down:40,enter:13,esc:27};document.addEventListener("keydown",function(e){var t=e.keyCode||e.which;switch(t){case u.esc:n.select(),n.setIndex(-1),n.$apply(),e.preventDefault()}},!0),document.addEventListener("blur",function(e){setTimeout(function(){n.select(),n.setIndex(-1),n.$apply()},200)},!0),r[0].addEventListener("keydown",function(r){var i=r.keyCode||r.which,s=e.element(this).find("li").length;switch(i){case u.up:t=n.getIndex()-1;if(t<-1)t=s-1;else if(t>=s){t=-1,n.setIndex(t),n.preSelectOff();break}n.setIndex(t),t!==-1&&n.preSelect(e.element(e.element(this).find("li")[t]).text()),n.$apply();break;case u.down:t=n.getIndex()+1;if(t<-1)t=s-1;else if(t>=s){t=-1,n.setIndex(t),n.preSelectOff(),n.$apply();break}n.setIndex(t),t!==-1&&n.preSelect(e.element(e.element(this).find("li")[t]).text());break;case u.left:break;case u.right:case u.enter:t=n.getIndex(),t!==-1&&n.select(e.element(e.element(this).find("li")[t]).text()),n.setIndex(-1),n.$apply();break;case u.esc:n.select(),n.setIndex(-1),n.$apply(),r.preventDefault();break;default:return}(n.getIndex()!==-1||i==u.enter)&&r.preventDefault()})},templateUrl:"js/lib/ac_template.html"}}),t.filter("highlight",["$sce",function(e){return function(t,n){if(typeof t=="function")return"";if(n){var r="("+n.split(/\ /).join(" |")+"|"+n.split(/\ /).join("|")+")",i=new RegExp(r,"gi");r.length&&(t=t.replace(i,'<span class="highlight">$1</span>'))}return e.trustAsHtml(t)}}]),t.directive("suggestion",function(){return{restrict:"A",require:"^autocomplete",link:function(e,t,n,r){t.bind("mouseenter",function(){r.preSelect(n.val),r.setIndex(n.index)}),t.bind("mouseleave",function(){r.preSelectOff()})}}})}),define("quickdate",["angular"],function(e){var t;t=e.module("ngQuickDate",[]),t.provider("ngQuickDateDefaults",function(){return{options:{dateFormat:"M/d/yyyy",timeFormat:"h:mm a",labelFormat:null,placeholder:"Click to Set Date",hoverText:null,buttonIconHtml:null,closeButtonHtml:"&times;",nextLinkHtml:"Next &rarr;",prevLinkHtml:"&larr; Prev",disableTimepicker:!1,disableClearButton:!1,defaultTime:null,dayAbbreviations:["Su","M","Tu","W","Th","F","Sa"],dateFilter:null,parseDateFunction:function(e){var t;return t=Date.parse(e),isNaN(t)?null:new Date(t)}},$get:function(){return this.options},set:function(e,t){var n,r,i;if(typeof e=="object"){i=[];for(n in e)r=e[n],i.push(this.options[n]=r);return i}return this.options[e]=t}}}),t.directive("quickDatepicker",["ngQuickDateDefaults","$filter","$sce",function(t,n,r){return{restrict:"E",require:"?ngModel",scope:{dateFilter:"=?",onChange:"&",required:"@"},replace:!0,link:function(i,s,o,u){var a,f,l,c,h,p,d,v,m,g,y,b,w;return p=function(){return g(),i.toggleCalendar(!1),i.weeks=[],i.inputDate=null,i.inputTime=null,i.invalid=!0,typeof o.initValue=="string"&&u.$setViewValue(o.initValue),m(),v()},g=function(){var e,n;for(e in t)n=t[e],e.match(/[Hh]tml/)?i[e]=r.trustAsHtml(t[e]||""):!i[e]&&o[e]?i[e]=o[e]:i[e]||(i[e]=t[e]);i.labelFormat||(i.labelFormat=i.dateFormat,i.disableTimepicker||(i.labelFormat+=" "+i.timeFormat));if(o.iconClass&&o.iconClass.length)return i.buttonIconHtml=r.trustAsHtml("<i ng-show='iconClass' class='"+o.iconClass+"'></i>")},f=!1,window.document.addEventListener("click",function(e){return i.calendarShown&&!f&&(i.toggleCalendar(!1),i.$apply()),f=!1}),e.element(s[0])[0].addEventListener("click",function(e){return f=!0}),v=function(){var e;return e=u.$modelValue?new Date(u.$modelValue):null,b(),y(e),i.mainButtonStr=e?n("date")(e,i.labelFormat):i.placeholder,i.invalid=u.$invalid},y=function(e){return e!=null?(i.inputDate=n("date")(e,i.dateFormat),i.inputTime=n("date")(e,i.timeFormat)):(i.inputDate=null,i.inputTime=null)},m=function(e){var t;return e==null&&(e=null),t=e!=null?new Date(e):new Date,t.toString()==="Invalid Date"&&(t=new Date),t.setDate(1),i.calendarDate=new Date(t)},b=function(){var e,t,n,r,s,o,a,f,c,p,d,v,m,g;o=i.calendarDate.getDay(),r=h(i.calendarDate.getFullYear(),i.calendarDate.getMonth()),s=Math.ceil((o+r)/7),d=[],e=new Date(i.calendarDate),e.setDate(e.getDate()+o*-1);for(a=v=0,g=s-1;0<=g?v<=g:v>=g;a=0<=g?++v:--v){d.push([]);for(n=m=0;m<=6;n=++m)t=new Date(e),i.defaultTime&&(c=i.defaultTime.split(":"),t.setHours(c[0]||0),t.setMinutes(c[1]||0),t.setSeconds(c[2]||0)),f=u.$modelValue&&t&&l(t,u.$modelValue),p=l(t,new Date),d[a].push({date:t,selected:f,disabled:typeof i.dateFilter=="function"?!i.dateFilter(t):!1,other:t.getMonth()!==i.calendarDate.getMonth(),today:p}),e.setDate(e.getDate()+1)}return i.weeks=d},u.$parsers.push(function(t){return i.required&&t==null?(u.$setValidity("required",!1),null):e.isDate(t)?(u.$setValidity("required",!0),t):e.isString(t)?(u.$setValidity("required",!0),i.parseDateFunction(t)):null}),u.$formatters.push(function(t){return e.isDate(t)?t:e.isString(t)?i.parseDateFunction(t):void 0}),a=function(e,t){return n("date")(e,t)},w=function(e){return typeof e=="string"?d(e):e},d=t.parseDateFunction,l=function(e,t,n){return n==null&&(n=!1),n?e-t===0:(e=w(e),t=w(t),e&&t&&e.getYear()===t.getYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate())},c=function(e,t){return!e||!t?!1:parseInt(e.getTime()/6e4)===parseInt(t.getTime()/6e4)},h=function(e,t){return[31,e%4===0&&e%100!==0||e%400===0?29:28,31,30,31,30,31,31,30,31,30,31][t]},u.$render=function(){return m(u.$viewValue),v()},u.$viewChangeListeners.unshift(function(){m(u.$viewValue),v();if(i.onChange)return i.onChange()}),i.$watch("calendarShown",function(t,n){var r;if(t)return r=e.element(s[0].querySelector(".quickdate-date-input"))[0],r.select()}),i.toggleCalendar=function(e){return isFinite(e)?i.calendarShown=e:i.calendarShown=!i.calendarShown},i.selectDate=function(e,t){var n;return t==null&&(t=!0),n=!u.$viewValue&&e||u.$viewValue&&!e||e&&u.$viewValue&&e.getTime()!==u.$viewValue.getTime(),typeof i.dateFilter=="function"&&!i.dateFilter(e)?!1:(u.$setViewValue(e),t&&i.toggleCalendar(!1),!0)},i.selectDateFromInput=function(e){var t,n,r,s;e==null&&(e=!1);try{n=d(i.inputDate);if(!n)throw"Invalid Date";if(!i.disableTimepicker&&i.inputTime&&i.inputTime.length&&n){s=i.disableTimepicker?"00:00:00":i.inputTime,r=d(""+i.inputDate+" "+s);if(!r)throw"Invalid Time";n=r}if(!c(u.$viewValue,n)&&!i.selectDate(n,!1))throw"Invalid Date";return e&&i.toggleCalendar(!1),i.inputDateErr=!1,i.inputTimeErr=!1}catch(o){t=o;if(t==="Invalid Date")return i.inputDateErr=!0;if(t==="Invalid Time")return i.inputTimeErr=!0}},i.onDateInputTab=function(){return i.disableTimepicker&&i.toggleCalendar(!1),!0},i.onTimeInputTab=function(){return i.toggleCalendar(!1),!0},i.nextMonth=function(){return m(new Date((new Date(i.calendarDate)).setMonth(i.calendarDate.getMonth()+1))),v()},i.prevMonth=function(){return m(new Date((new Date(i.calendarDate)).setMonth(i.calendarDate.getMonth()-1))),v()},i.clear=function(){return i.selectDate(null,!0)},p()},template:"<div class='quickdate'>\n  <a href='' ng-focus='toggleCalendar()' ng-click='toggleCalendar()' class='quickdate-button' title='{{hoverText}}'><div ng-hide='iconClass' ng-bind-html='buttonIconHtml'></div>{{mainButtonStr}}</a>\n  <div class='quickdate-popup' ng-class='{open: calendarShown}'>\n    <a href='' tabindex='-1' class='quickdate-close' ng-click='toggleCalendar()'><div ng-bind-html='closeButtonHtml'></div></a>\n    <div class='quickdate-text-inputs'>\n      <div class='quickdate-input-wrapper'>\n        <label>Date</label>\n        <input class='quickdate-date-input' ng-class=\"{'ng-invalid': inputDateErr}\" name='inputDate' type='text' ng-model='inputDate' placeholder='1/1/2013' ng-enter=\"selectDateFromInput(true)\" ng-blur=\"selectDateFromInput(false)\" on-tab='onDateInputTab()' />\n      </div>\n      <div class='quickdate-input-wrapper' ng-hide='disableTimepicker'>\n        <label>Time</label>\n        <input class='quickdate-time-input' ng-class=\"{'ng-invalid': inputTimeErr}\" name='inputTime' type='text' ng-model='inputTime' placeholder='12:00 PM' ng-enter=\"selectDateFromInput(true)\" ng-blur=\"selectDateFromInput(false)\" on-tab='onTimeInputTab()'>\n      </div>\n    </div>\n    <div class='quickdate-calendar-header'>\n      <a href='' class='quickdate-prev-month quickdate-action-link' tabindex='-1' ng-click='prevMonth()'><div ng-bind-html='prevLinkHtml'></div></a>\n      <span class='quickdate-month'>{{calendarDate | date:'MMMM yyyy'}}</span>\n      <a href='' class='quickdate-next-month quickdate-action-link' ng-click='nextMonth()' tabindex='-1' ><div ng-bind-html='nextLinkHtml'></div></a>\n    </div>\n    <table class='quickdate-calendar'>\n      <thead>\n        <tr>\n          <th ng-repeat='day in dayAbbreviations'>{{day}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat='week in weeks'>\n          <td ng-mousedown='selectDate(day.date, true, true)' ng-class='{\"other-month\": day.other, \"disabled-date\": day.disabled, \"selected\": day.selected, \"is-today\": day.today}' ng-repeat='day in week'>{{day.date | date:'d'}}</td>\n        </tr>\n      </tbody>\n    </table>\n    <div class='quickdate-popup-footer'>\n      <a href='' class='quickdate-clear' tabindex='-1' ng-hide='disableClearButton' ng-click='clear()'>Clear</a>\n    </div>\n  </div>\n</div>"}}]),t.directive("ngEnter",function(){return function(e,t,n){return t.bind("keydown keypress",function(t){if(t.which===13)return e.$apply(n.ngEnter),t.preventDefault()})}}),t.directive("onTab",function(){return{restrict:"A",link:function(e,t,n){return t.bind("keydown keypress",function(t){if(t.which===9&&!t.shiftKey)return e.$apply(n.onTab)})}}})}),define("modules/app",["angular","angular-storage","angular-route","lib/autocomplete","quickdate"],function(e){return e.module("app",["ngStorage","ngRoute","autocomplete","ngQuickDate"])}),define("configuration/quickdateConfiguration",["modules/app"],function(e){e.config(["ngQuickDateDefaultsProvider",function(e){e.set({dateFormat:"dd/MM/yyyy",disableTimepicker:!0,disableClearButton:!0,parseDateFunction:function(e){var t=/^(.*?)\/(.*?)\/(.*?)$/,n=e.match(t);return new Date(n[3],n[2]-1,n[1])}})}])}),define("service/contactsService",["modules/app"],function(e){e.service("contactsService",["$http",function(e){this.getContacts=function(t){return e.get("/contacts")}}])}),define("service/projectsService",["modules/app"],function(e){e.service("projectsService",["$http",function(e){this.getProjects=function(t){return e.get("/projects")}}])}),define("service/loadContactsAndProjectsService",["modules/app","service/contactsService","service/projectsService"],function(e){e.service("loadContactsAndProjectsService",["$sessionStorage","$q","$route","$location","contactsService","projectsService",function(e,t,n,r,i,s){this.refreshContactsProjects=function(o){t.all([i.getContacts(),s.getProjects()]).then(function(t){e.$default({contacts:t[0].data}),e.$default({projects:t[1].data}),r.path()===o?n.reload():r.path(o)})}}])}),define("events/locationChangeStart",["modules/app","service/loadContactsAndProjectsService"],function(e){e.run(["$rootScope","$sessionStorage","$location","loadContactsAndProjectsService",function(e,t,n,r){var i=function(e){return e.indexOf("/entries")>0||e.indexOf("/search")>0},s=function(){return!t.contacts||!t.projects},o=function(e,t,o){s()&&i(t)&&(e.preventDefault(),r.refreshContactsProjects(n.path()))};e.$on("$locationChangeStart",o)}])}),define("controllers/menuController",["angular","modules/app","service/loadContactsAndProjectsService"],function(e,t){t.controller("menuController",["$scope","$location","$sessionStorage","loadContactsAndProjectsService",function(t,n,r,i){this.refreshContactsProjects=function(s){s.stopPropagation(),e.element(s.target).parent().parent().parent().removeClass("open"),delete r.contacts,delete r.projects,t.openDropDown=!1,i.refreshContactsProjects(n.path())}}])}),define("controllers/alertsController",["modules/app"],function(e){e.controller("alertsController",["$rootScope",function(e){e.alerts={},this.dismissSuccess=function(){e.alerts.success=null},this.dismissFalure=function(){e.alerts.failure=null}}])}),define("interceptors/loadingInterceptor",["modules/app"],function(e){e.config(["$httpProvider",function(e){e.interceptors.push(["$q","$injector",function(e,t){var n,r=0;n=n||t.get("$rootScope");var i=function(){++r,r===1&&(n.ajaxLoader=!0)},s=function(){--r,r===0&&(n.ajaxLoader=!1)};return{request:function(t){return i(),t||e.when(t)},response:function(t){return s(),t||e.when(t)},responseError:function(t){return s(),e.reject(t)}}}])}])}),define("interceptors/httpErrorInterceptor",["modules/app"],function(e){e.config(["$httpProvider",function(e){e.interceptors.push(["$q","$location","$sessionStorage","$window",function(e,t,n,r){return{responseError:function(i){return i.status==403?(delete n.contacts,delete n.projects,t.path("/register")):i.status==401&&(r.location="/"),e.reject(i)}}}])}])}),define("service/redirectService",["modules/app","service/contactsService","service/projectsService"],function(e){e.service("redirectService",["$location","$sessionStorage","$q","contactsService","projectsService",function(e,t,n,r,i){this.loadCurrentEntries=function(){var t=new Date,n=t.getMonth()+1,r=t.getFullYear();e.path("/entries/"+n+"/"+r)}}])}),define("routes/defaultRoutes",["modules/app","service/redirectService"],function(e){e.config(["$routeProvider",function(e){e.when("/",{redirectTo:"/entries/current"}).otherwise({redirectTo:"/"})}])}),define("service/registrationService",["modules/app"],function(e){e.service("registrationService",["$http",function(e){this.register=function(t){return e.post("/register",{apiKey:t})}}])}),define("controllers/registrationController",["modules/app","service/registrationService","service/contactsService","service/projectsService"],function(e){e.controller("registrationController",["$scope","$rootScope","$location","$q","$sessionStorage","registrationService","contactsService","projectsService",function(e,t,n,r,i,s,o,u){t.alerts={},e.register=function(){s.register(e.apiKey).then(function(e){n.path("/entries/current")})}}])}),define("routes/registrationRoutes",["modules/app","controllers/registrationController"],function(e){e.config(["$routeProvider",function(e){e.when("/register",{controller:"registrationController",templateUrl:"views/register.html"})}])}),define("models/listEntriesModel",[],function(){var e=function(){this.selectedEntries=[],this.allEntriesSelected=!1,this.entries=[]};return e.prototype.isNoEntrySelected=function(){return this.selectedEntries.length==0},e.prototype.isEntrySelected=function(e){return this.selectedEntries.indexOf(e)>-1},e.prototype.selectEntry=function(e){this.allEntriesSelected=!1;var t=this.selectedEntries.indexOf(e);t>-1?this.selectedEntries.splice(t,1):this.selectedEntries.push(e)},e.prototype.selectAllEntries=function(){this.allEntriesSelected?this.selectedEntries=this.entries.map(function(e){return e.id}):this.selectedEntries=[]},e}),define("service/entriesService",["modules/app"],function(e){e.service("entriesService",["$http",function(e){var t=function(e){var t=e.getFullYear(),n=e.getMonth();return new Date(t,n+1,0)},n=function(e){var t=e.getMonth()+1;return e.getDate()+"/"+t+"/"+e.getFullYear()};this.getEntries=function(r,i,s){var o=new Date(i,r-1,1),u=n(o),a=n(t(o));return e.get("/entries?from="+u+"&to="+a)},this.addBulkEntries=function(t,r,i,s){var o={contactId:t.id,projectId:r.id,duration:i*60*60,dates:s.map(function(e){return n(e)})};return e.post("/entries/bulk/add",o)},this.delete=function(t){return e.delete("/entries/"+t)},this.deleteBulkEntries=function(t){return e.post("/entries/bulk/delete",{entryIds:t})}}])}),define("controllers/listEntriesController",["modules/app","models/listEntriesModel","service/entriesService"],function(e,t){e.controller("listEntriesController",["$scope","$routeParams","$sessionStorage","$rootScope","entriesService",function(e,n,r,i,s){var o=new t;e.model=o;var u=function(e){return{id:e.id,date:e.date,contact:e.contact?r.contacts.filter(function(t){return t.id==e.contact})[0].name:"",project:e.project?r.projects.filter(function(t){return t.id==e.project})[0].name:"",duration:e.duration}},a=function(e){return e.map(u)},f=function(e){i.alerts.success=e};this.fetchEntries=function(){s.getEntries(n.month,n.year).then(function(e){o.entries=a(e.data)})},this.init=function(){var t=this;e.$on("child.refresh.entries",function(){t.fetchEntries()}),this.fetchEntries()},this.deleteEntry=function(e){var t=this;s.delete(e).then(function(){f("Entry deleted successfully!"),t.fetchEntries()})},this.deleteAllSelectedEntries=function(){var e=this;s.deleteBulkEntries(o.selectedEntries).then(function(){o.allEntriesSelected=!1,o.selectedEntries=[],f("Entries deleted successfully!"),e.fetchEntries()})}}])}),define("models/addEntriesModel",[],function(){var e=function(e,t){var n=[],r=new Date(t,e-1,1),i=new Date(t,e,0);for(var s=r;s<=i;s=new Date(t,e-1,s.getDate()+1))n.push(s);return n},t=function(e){var t=new Date;return e.filter(function(e){return e<=t&&e.getDay()>=1&&e.getDay()<=5})},n=["Su","Mo","Tu","We","Th","Fr","Sa"],r=function(e){this.value=e};r.prototype.isInFuture=function(){return this.value>new Date},r.prototype.dayName=function(){return n[this.value.getDay()]},r.prototype.isWeekend=function(){var e=this.value.getDay();return e==0||e==6};var i=new r(null);i.isInFuture=function(){return!0},i.dayName=function(){return""},i.isWeekend=function(){return!1};var s=function(e){var t=[],n=e[0],s=n.getDay(),o=e.length,u=1;for(var a=0;a<6;a++){if(u>o)break;t.push([]);for(var f=0;f<=6;f++)a==0&&f<s?t[a].push(i):u<=o?(t[a].push(new r(e[u-1])),u++):t[a].push(i)}return t},o=function(n,r,i,o){var u=e(i,o);this._weekdays=t(u),this._contacts=n,this._projects=r,this.projectNames=r.map(function(e){return e.name}),this.dates=s(u),this.allWeekdaysSelected=!1,this.selectedDates=[]};return o.prototype.isDateSelected=function(e){return this.selectedDates.indexOf(e.value)>-1},o.prototype.selectProject=function(e){var t=this;this.selectedProject=this._projects.filter(function(t){return t.name===e})[0],this.selectedContact=this._contacts.filter(function(e){return e.id===t.selectedProject.contactId})[0]},o.prototype.isInvalid=function(){return!this.selectedProject||!this.selectedContact||!this.duration||this.selectedDates.length===0},o.prototype.toggleAllWeekdays=function(){this.allWeekdaysSelected?this.selectedDates=this._weekdays.slice():this.selectedDates=[]},o.prototype.selectDate=function(e){if(e.isInFuture())return;this.allWeekdaysSelected=!1;var t=this.selectedDates.indexOf(e.value);t>-1?this.selectedDates.splice(t,1):this.selectedDates.push(e.value)},o}),define("controllers/addEntriesController",["modules/app","models/addEntriesModel","service/entriesService"],function(e,t){e.controller("addEntriesController",["$scope","$location","$anchorScroll","$routeParams","$sessionStorage","$rootScope","entriesService",function(e,n,r,i,s,o,u){var a=new t(s.contacts,s.projects,i.month,i.year);e.model=a,this.selectProject=function(e){a.selectProject(e)},this.projectNameChanged=function(){a.selectedProject&&a.typedProjectName!==a.selectedProject.name&&(a.selectedContact=null,a.selectedProject=null)},this.addEntries=function(){var t=this;u.addBulkEntries(a.selectedContact,a.selectedProject,a.duration,a.selectedDates).then(function(){a.selectedDates=[],a.allWeekdaysSelected=!1,o.alerts.success="Entries added successfully!",e.$emit("parent.refresh.entries"),n.hash("viewEntries"),r(),n.hash("")})}}])}),define("models/paginationModel",[],function(){var e=function(e){var t=e.getMonth()+1;return t+"/"+e.getFullYear()},t=function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"];return t[e-1]},n=function(t,n){var r=new Date(n,t-2,1);return e(r)},r=function(t,n){var r=new Date(n,t,1);return e(r)},i=function(e,i){this._currentMonth=e,this._currentYear=i,this.previousMonthYear=n(e,i),this.nextMonthYear=r(e,i),this.currentMonthYear=t(e)+" "+i};return i.prototype.showNextMonthYear=function(){return new Date(this._currentYear,this._currentMonth,1)<new Date},i}),define("controllers/paginationController",["modules/app","models/paginationModel"],function(e,t){e.controller("paginationController",["$scope","$routeParams",function(e,n){var r=new t(n.month,n.year);e.model=r,this.goToNextMonth=function(e){r.showNextMonthYear()||e.preventDefault()}}])}),define("controllers/entriesController",["modules/app","controllers/listEntriesController","controllers/addEntriesController","controllers/paginationController","service/entriesService"],function(e){e.controller("entriesController",["$scope","$rootScope",function(e,t){t.alerts={},e.$on("parent.refresh.entries",function(){e.$broadcast("child.refresh.entries")})}])}),define("routes/entriesPageRoutes",["modules/app","service/redirectService","controllers/entriesController"],function(e){e.config(["$routeProvider",function(e){e.when("/entries/current",{resolve:{redirect:["redirectService",function(e){e.loadCurrentEntries()}]}}).when("/entries/:month/:year",{controller:"entriesController",templateUrl:"views/entries.html"})}])}),define("models/searchModel",[],function(){var e=function(e,t){this._contacts=e,this._projects=t,this.projectNames=t.map(function(e){return e.name})};return e.prototype.isInvalid=function(){return!this.selectedProject||!this.selectedContact||!this.fromDate||!this.toDate},e.prototype.isQuickSearchInvalid=function(){return!this.selectedProject||!this.selectedContact},e.prototype.selectProject=function(e){var t=this;this.selectedProject=this._projects.filter(function(t){return t.name===e})[0],this.selectedContact=this._contacts.filter(function(e){return e.id===t.selectedProject.contactId})[0]},e}),define("service/searchService",["modules/app"],function(e){e.service("searchService",["$http",function(e){var t=function(e){var t=e.getMonth()+1;return e.getDate()+"/"+t+"/"+e.getFullYear()};this.searchEntries=function(n,r,i){var s=t(r),o=t(i);return e.get("/entries?projects="+n.id+"&from="+s+"&to="+o)}}])}),define("controllers/searchController",["modules/app","models/searchModel","service/searchService",""],function(e,t){e.controller("searchController",["$scope","$rootScope","$sessionStorage","searchService",function(e,n,r,i){n.alerts={};var s=new t(r.contacts,r.projects);e.model=s,this.selectProject=function(e){s.selectProject(e)},this.projectNameChanged=function(){s.selectedProject&&s.typedProjectName!==s.selectedProject.name&&(s.selectedContact=null,s.selectedProject=null)};var o=function(e){return e.map(u)},u=function(e){return{date:e.date,duration:e.duration}};this.search=function(){i.searchEntries(s.selectedProject,s.fromDate,s.toDate).then(function(e){s.searchResults=o(e.data)})},this.quickSearch=function(){var e=new Date;i.searchEntries(s.selectedProject,new Date(e.getFullYear(),0,1),e).then(function(e){s.searchResults=o(e.data)})}}])}),define("routes/searchRoutes",["modules/app","controllers/searchController"],function(e){e.config(["$routeProvider",function(e){e.when("/search",{controller:"searchController",templateUrl:"views/search.html"})}])}),require.config({baseUrl:"js",paths:{jquery:"//code.jquery.com/jquery-2.1.1.min",angular:"//ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular.min","angular-route":"//ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular-route.min","angular-storage":"./lib/ngStorage",bootstrap:"//netdna.bootstrapcdn.com/bootstrap/3.0.1/js/bootstrap.min",quickdate:"./lib/ng-quick-date"},shim:{"angular-storage":{exports:"angular-storage",deps:["angular"]},"angular-route":{exports:"angular-route",deps:["angular"]},quickdate:{exports:"quickdate",deps:["angular"]},angular:{exports:"angular"},bootstrap:{exports:"bootstrap",deps:["jquery"]}}}),require(["angular","bootstrap","configuration/quickdateConfiguration","events/locationChangeStart","controllers/menuController","controllers/alertsController","interceptors/loadingInterceptor","interceptors/httpErrorInterceptor","routes/defaultRoutes","routes/registrationRoutes","routes/entriesPageRoutes","routes/searchRoutes"],function(e){e.bootstrap(document,["app"])}),define("main",function(){});